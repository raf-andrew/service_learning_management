---
description:
globs:
alwaysApply: false
---
# Agent Implementation Guide

## Agent Structure
Agents are implemented in the `src/MCP/Core` directory. Current implementations:

### Service Health Agent
[ServiceHealthAgent.php](mdc:src/MCP/Core/ServiceHealthAgent.php) implements:
- Health check functionality
- Metrics collection
- Service status monitoring

### Deployment Automation Agent
[DeploymentAutomationAgent.php](mdc:src/MCP/Core/DeploymentAutomationAgent.php) implements:
- Deployment automation
- Rollback procedures
- Environment management
- Metrics collection

## Implementation Requirements

### Base Requirements
1. All agents must:
   - Implement health check functionality
   - Provide metrics collection
   - Handle errors gracefully
   - Validate configurations
   - Log operations

### Service Health Agent Requirements
1. Must implement:
   - `checkHealth(string $serviceName): bool`
   - `getMetrics(): array`
2. Must handle:
   - Invalid service names
   - Missing configurations
   - Failed pre-checks
   - Degraded services

### Deployment Automation Agent Requirements
1. Must implement:
   - `deploy(string $environment): bool`
   - `rollback(string $environment): bool`
   - `getMetrics(): array`
2. Must handle:
   - Invalid environments
   - Failed deployments
   - Rollback procedures
   - Environment validation

## Testing Requirements
Each agent must have corresponding test cases that verify:
1. Successful operations
2. Error handling
3. Configuration validation
4. Metrics collection
5. Edge cases

## Code Quality Standards
1. Must comply with PSR-12
2. Must pass PHPMD checks
3. Must maintain high test coverage
4. Must follow documented patterns
