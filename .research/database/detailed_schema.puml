@startuml

' Core Entities
entity "User" as user {
  + id: PK
  --
  username: string
  email: string
  password: string
  first_name: string
  last_name: string
  role_id: FK
  is_instructor: boolean
  social_links: json
  biography: text
  payment_keys: json
  wishlist: json
  status: enum
  created_at: timestamp
  updated_at: timestamp
}

entity "Course" as course {
  + id: PK
  --
  title: string
  description: text
  price: decimal
  discounted_price: decimal
  discount_flag: boolean
  is_free_course: boolean
  status: enum
  requirements: text
  outcomes: text
  language: string
  level: enum
  instructor_id: FK
  category_id: FK
  sub_category_id: FK
  expiry_period: integer
  created_at: timestamp
  updated_at: timestamp
}

entity "Section" as section {
  + id: PK
  --
  title: string
  course_id: FK
  order: integer
  created_at: timestamp
  updated_at: timestamp
}

entity "Lesson" as lesson {
  + id: PK
  --
  title: string
  section_id: FK
  course_id: FK
  video_url: string
  duration: integer
  order: integer
  lesson_type: enum
  attachment: string
  summary: text
  created_at: timestamp
  updated_at: timestamp
}

entity "Enrollment" as enrollment {
  + id: PK
  --
  user_id: FK
  course_id: FK
  status: enum
  enrolled_at: timestamp
  completed_at: timestamp
  progress: integer
  created_at: timestamp
  updated_at: timestamp
}

entity "Payment" as payment {
  + id: PK
  --
  user_id: FK
  course_id: FK
  amount: decimal
  status: enum
  payment_date: timestamp
  payment_method: string
  transaction_id: string
  created_at: timestamp
  updated_at: timestamp
}

entity "Payout" as payout {
  + id: PK
  --
  instructor_id: FK
  amount: decimal
  status: enum
  payment_date: timestamp
  payment_method: string
  transaction_id: string
  created_at: timestamp
  updated_at: timestamp
}

entity "Category" as category {
  + id: PK
  --
  name: string
  slug: string
  parent_id: FK
  thumbnail: string
  created_at: timestamp
  updated_at: timestamp
}

' Relationships
user ||--o{ enrollment
user ||--o{ payment
user ||--o{ payout
user ||--o{ course

course ||--o{ section
course ||--o{ enrollment
course ||--o{ payment
course ||--o{ category

section ||--o{ lesson

category ||--o{ category

@enduml 