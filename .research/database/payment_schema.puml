@startuml Payment Schema

' Core Entities
entity "Payment" {
    + id : integer <<PK>>
    --
    user_id : integer <<FK>>
    course_id : integer <<FK>>
    amount : decimal
    status : string
    payment_date : datetime
    payment_method : string
    transaction_id : string
    payment_details : json
    tax_amount : decimal
    coupon_code : string
    gift_to_user_id : integer <<FK>>
}

entity "Payout" {
    + id : integer <<PK>>
    --
    instructor_id : integer <<FK>>
    amount : decimal
    status : string
    payment_date : datetime
    payment_method : string
    transaction_id : string
    payment_details : json
}

entity "PaymentGateway" {
    + id : integer <<PK>>
    --
    name : string
    identifier : string
    keys : json
    enabled_test_mode : boolean
    status : boolean
}

entity "Coupon" {
    + id : integer <<PK>>
    --
    code : string
    discount_percentage : decimal
    expiry_date : datetime
    status : boolean
    created_at : datetime
    updated_at : datetime
}

' Relationships
User ||--o{ Payment
User ||--o{ Payout : instructor
Course ||--o{ Payment
PaymentGateway ||--o{ Payment
Coupon ||--o{ Payment

@enduml 